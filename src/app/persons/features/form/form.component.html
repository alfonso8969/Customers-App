<div class="card container">
  <div class="card-header">
    <h1 *ngIf="!edit; else editPerson" class="header new-amsterdam-regula f-left">New Person</h1>
    <ng-template #editPerson> <h1 class="header new-amsterdam-regular f-left">Editando: {{ person()?.name }}</h1></ng-template>
    <a *ngIf="!edit" href="/persons" class="btn btn-primary f-right mt-2">Back</a>
    <a *ngIf="edit" href="/persons/person/{{ person()?.id }}" class="btn btn-primary f-right mt-2">Back</a>
  </div>
  <div class="card-body form-group">
    <form [formGroup]="personForm" (ngSubmit)="onSubmit()">
      <div *ngIf="false">
        <label for="id">ID</label>
        <input id="id" formControlName="id" type="text" class="form-control">
      </div>

      <div>
        <label for="name">Name</label>
        <input id="name" formControlName="name" type="text" class="form-control">
        <div *ngIf="formControls['name'].invalid && (formControls['name'].dirty || formControls['name'].touched)">
          <div class="text-error" *ngIf="formControls['name'].errors?.['required']">Name is required.</div>
          <div class="text-error" *ngIf="formControls['name'].errors?.['minlength']">Name must be at least 2 characters
            long.</div>
        </div>
      </div>

      <div>
        <label for="phone">Phone</label>
        <input id="phone" formControlName="phone" type="text" class="form-control">
        <div *ngIf="formControls['phone'].invalid && (formControls['phone'].dirty || formControls['phone'].touched)">
          <div class="text-error" *ngIf="formControls['phone'].errors?.['required']">Phone is required.</div>
          <div class="text-error" *ngIf="formControls['phone'].errors?.['pattern']">Phone must be a 9-digit number.
          </div>
        </div>
      </div>

      <div>
        <fieldset>
          <legend>Address</legend>
          <div class="row">
            <div class="col-4 col-sm-4">

              <label for="street">Street</label>
              <input id="street" formControlName="street" type="text" class="form-control w-75">
              <div
                *ngIf="formControls['street'].invalid && (formControls['street'].dirty || formControls['street'].touched)">
                <div class="text-error" *ngIf="formControls['street'].errors?.['required']">Street is required.</div>
              </div>
            </div>
            <div class="col-4 col-sm-4">
              <label for="city">City</label>
              <input id="city" formControlName="city" type="text" class="form-control w-75">
              <div *ngIf="formControls['city'].invalid && (formControls['city'].dirty || formControls['city'].touched)">
                <div class="text-error" *ngIf="formControls['city'].errors?.['required']">City is required.</div>
              </div>

            </div>

            <div class="col-4 col-sm-4">
              <label for="zip">Zip</label>
              <input id="zip" formControlName="zip" type="text" class="form-control w-75">
              <div *ngIf="formControls['zip'].invalid && (formControls['zip'].dirty || formControls['zip'].touched)">
                <div class="text-error" *ngIf="formControls['zip'].errors?.['required']">Zip is required.</div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-4 col-sm-4">
              <label for="state">Country</label>
              <input id="state" formControlName="country" type="text" class="form-control w-75">
              <div
                *ngIf="formControls['country'].invalid && (formControls['country'].dirty || formControls['country'].touched)">
                <div class="text-error" *ngIf="formControls['country'].errors?.['required']">Country is required.
                </div>
              </div>
            </div>
            <div class="col-4 col-sm-4">
              <label for="state">State</label>
              <input id="state" formControlName="region" type="text" class="form-control w-75">
              <div
                *ngIf="formControls['region'].invalid && (formControls['region'].dirty || formControls['region'].touched)">
                <div class="text-error" *ngIf="formControls['region'].errors?.['required']">Region is required.</div>
              </div>
            </div>
          </div>
        </fieldset>

      </div>

      <div>
        <label for="image" class="p-2">Image URL</label>
        <input id="image" formControlName="image" type="text" class="form-control w-75">
        <div *ngIf="formControls['image'].invalid && (formControls['image'].dirty || formControls['image'].touched)">
          <div class="text-error" *ngIf="formControls['image'].errors?.['required']">Image URL is required.</div>
        </div>
      </div>

      <div class="card-footer">
<!--         {{ personForm.invalid }}
        @for (error of checkErrors(); track error) {
          {{ error }}
        } -->
        <button type="button" class="btn btn-secondary f-left" (click)="resetForm()">Cancel</button>
        <button type="submit" class="btn btn-primary f-right" [disabled]="personForm.invalid">Submit</button>
      </div>
    </form>
  </div>
</div>
